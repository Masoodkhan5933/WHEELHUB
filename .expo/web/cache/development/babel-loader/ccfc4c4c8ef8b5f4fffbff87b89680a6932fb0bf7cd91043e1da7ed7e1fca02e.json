{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { getDoc, deleteDoc, getDocs, where, query, collection, doc, setDoc } from 'firebase/firestore';\nimport { useState } from 'react';\nimport { firestore } from \"../database/dbconfig\";\nvar Firestore = function Firestore() {\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    loading = _useState2[0],\n    setLoading = _useState2[1];\n  var addUser = function () {\n    var _ref = _asyncToGenerator(function* (userData) {\n      var usersRef = collection(firestore, 'users');\n      yield setDoc(doc(usersRef, userData.email), userData);\n    });\n    return function addUser(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var deleteUser = function () {\n    var _ref2 = _asyncToGenerator(function* (email) {\n      var userRef = doc(firestore, 'users', email);\n      yield deleteDoc(userRef);\n    });\n    return function deleteUser(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var updateUser = function () {\n    var _ref3 = _asyncToGenerator(function* (email, updatedUserData) {\n      var userRef = doc(firestore, 'users', email);\n      yield setDoc(userRef, updatedUserData, {\n        merge: true\n      });\n    });\n    return function updateUser(_x3, _x4) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var getUsers = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      var usersCollection = collection(firestore, 'users');\n      var querySnapshot = yield getDocs(usersCollection);\n      return querySnapshot.docs.map(function (doc) {\n        return _objectSpread({\n          id: doc.id\n        }, doc.data());\n      });\n    });\n    return function getUsers() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var userExists = function () {\n    var _ref5 = _asyncToGenerator(function* (email, password) {\n      setLoading(true);\n      var q = query(collection(firestore, 'users'), where('email', '==', email), where('password', '==', password));\n      var querySnapshot = yield getDocs(q);\n      setLoading(false);\n      return querySnapshot.docs.length > 0 ? true : false;\n    });\n    return function userExists(_x5, _x6) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var addCar = function () {\n    var _ref6 = _asyncToGenerator(function* (carData) {\n      try {\n        var carsCollection = collection(firestore, 'cars');\n        yield setDoc(doc(carsCollection), carData);\n      } catch (error) {\n        console.error('Error adding car:', error);\n        throw error;\n      }\n    });\n    return function addCar(_x7) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n  var deleteCar = function () {\n    var _ref7 = _asyncToGenerator(function* (carName) {\n      var carRef = doc(firestore, 'cars', carName);\n      yield deleteDoc(carRef);\n    });\n    return function deleteCar(_x8) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n  var updateCar = function () {\n    var _ref8 = _asyncToGenerator(function* (carName, updatedCarData) {\n      var carRef = doc(firestore, 'cars', carName);\n      yield setDoc(carRef, updatedCarData, {\n        merge: true\n      });\n    });\n    return function updateCar(_x9, _x10) {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n  var getCars = function () {\n    var _ref9 = _asyncToGenerator(function* () {\n      var carsCollection = collection(firestore, 'cars');\n      var querySnapshot = yield getDocs(carsCollection);\n      return querySnapshot.docs.map(function (doc) {\n        return _objectSpread({\n          id: doc.id\n        }, doc.data());\n      });\n    });\n    return function getCars() {\n      return _ref9.apply(this, arguments);\n    };\n  }();\n  var carExists = function () {\n    var _ref10 = _asyncToGenerator(function* (carName) {\n      setLoading(true);\n      var q = query(collection(firestore, 'cars'), where('carName', '==', carName));\n      var querySnapshot = yield getDocs(q);\n      setLoading(false);\n      return querySnapshot.docs.length > 0 ? true : false;\n    });\n    return function carExists(_x11) {\n      return _ref10.apply(this, arguments);\n    };\n  }();\n  return {\n    addUser: addUser,\n    deleteUser: deleteUser,\n    updateUser: updateUser,\n    getUsers: getUsers,\n    userExists: userExists,\n    addCar: addCar,\n    deleteCar: deleteCar,\n    updateCar: updateCar,\n    getCars: getCars,\n    carExists: carExists,\n    loading: loading\n  };\n};\nexport default Firestore;","map":{"version":3,"names":["getDoc","deleteDoc","getDocs","where","query","collection","doc","setDoc","useState","firestore","Firestore","_useState","_useState2","_slicedToArray","loading","setLoading","addUser","_ref","_asyncToGenerator","userData","usersRef","email","_x","apply","arguments","deleteUser","_ref2","userRef","_x2","updateUser","_ref3","updatedUserData","merge","_x3","_x4","getUsers","_ref4","usersCollection","querySnapshot","docs","map","_objectSpread","id","data","userExists","_ref5","password","q","length","_x5","_x6","addCar","_ref6","carData","carsCollection","error","console","_x7","deleteCar","_ref7","carName","carRef","_x8","updateCar","_ref8","updatedCarData","_x9","_x10","getCars","_ref9","carExists","_ref10","_x11"],"sources":["D:/MASOOD UNI/wheelhub/hooks/firestore.js"],"sourcesContent":["import {\r\n  getDoc,\r\n  deleteDoc,\r\n  getDocs,\r\n  where,\r\n  query,\r\n  collection,\r\n  doc,\r\n  setDoc,\r\n} from 'firebase/firestore';\r\nimport { useState } from 'react';\r\nimport { firestore } from '../database/dbconfig';\r\n\r\nconst Firestore = () => {\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  \r\n\r\n\r\n\r\n\r\n\r\n  // User operations\r\n  const addUser = async (userData) => {\r\n    const usersRef = collection(firestore, 'users');\r\n    await setDoc(doc(usersRef, userData.email), userData);\r\n  };\r\n\r\n  const deleteUser = async (email) => {\r\n    const userRef = doc(firestore, 'users', email);\r\n    await deleteDoc(userRef);\r\n  };\r\n\r\n  const updateUser = async (email, updatedUserData) => {\r\n    const userRef = doc(firestore, 'users', email);\r\n    await setDoc(userRef, updatedUserData, { merge: true });\r\n  };\r\n\r\n  const getUsers = async () => {\r\n    const usersCollection = collection(firestore, 'users');\r\n    const querySnapshot = await getDocs(usersCollection);\r\n    return querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n  };\r\n\r\n  const userExists = async (email, password) => {\r\n    setLoading(true);\r\n    const q = query(collection(firestore, 'users'), where('email', '==', email), where('password', '==', password));\r\n\r\n    const querySnapshot = await getDocs(q);\r\n    setLoading(false);\r\n    return querySnapshot.docs.length > 0 ? true : false;\r\n  };\r\n\r\n  // Car operations\r\n  const addCar = async (carData) => {\r\n    try {\r\n      const carsCollection = collection(firestore, 'cars');\r\n      await setDoc(doc(carsCollection), carData);\r\n    } catch (error) {\r\n      console.error('Error adding car:', error);\r\n      throw error; \r\n    }\r\n  };\r\n\r\n  const deleteCar = async (carName) => {\r\n    const carRef = doc(firestore, 'cars', carName);\r\n    await deleteDoc(carRef);\r\n  };\r\n\r\n  const updateCar = async (carName, updatedCarData) => {\r\n    const carRef = doc(firestore, 'cars', carName);\r\n    await setDoc(carRef, updatedCarData, { merge: true });\r\n  };\r\n\r\n  const getCars = async () => {\r\n    const carsCollection = collection(firestore, 'cars');\r\n    const querySnapshot = await getDocs(carsCollection);\r\n    return querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n  };\r\n\r\n  const carExists = async (carName) => {\r\n    setLoading(true);\r\n    const q = query(collection(firestore, 'cars'), where('carName', '==', carName));\r\n\r\n    const querySnapshot = await getDocs(q);\r\n    setLoading(false);\r\n    return querySnapshot.docs.length > 0 ? true : false;\r\n  };\r\n\r\n  return {\r\n    addUser,\r\n    deleteUser,\r\n    updateUser,\r\n    getUsers,\r\n    userExists,\r\n    addCar,\r\n    deleteCar,\r\n    updateCar,\r\n    getCars,\r\n    carExists,\r\n    loading,\r\n  };\r\n};\r\n\r\nexport default Firestore;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}