{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { firestore } from \"../database/dbconfig\";\nimport { getDoc, deleteDoc, getDocs, where, query, collection, doc, setDoc } from 'firebase/firestore';\nimport { useState } from 'react';\nvar userFirestore = function userFirestore() {\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    loading = _useState2[0],\n    setLoading = _useState2[1];\n  var addUser = function () {\n    var _ref = _asyncToGenerator(function* (userData) {\n      var userRef = collection(firestore, 'users');\n      yield setDoc(doc(userRef, userData.email), userData);\n    });\n    return function addUser(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var deleteUser = function () {\n    var _ref2 = _asyncToGenerator(function* (userId) {\n      var userRef = doc(firestore, 'users', userId);\n      yield deleteDoc(userRef);\n    });\n    return function deleteUser(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var updateUser = function () {\n    var _ref3 = _asyncToGenerator(function* (userId, updatedUserData) {\n      var userRef = doc(firestore, 'users', userId);\n      yield setDoc(userRef, updatedUserData, {\n        merge: true\n      });\n    });\n    return function updateUser(_x3, _x4) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var userExists = function () {\n    var _ref4 = _asyncToGenerator(function* (email, password) {\n      setLoading(true);\n      var q = query(collection(firestore, 'users'), where('email', '==', email), where('password', '==', password));\n      var querySnapshot = yield getDocs(q);\n      setLoading(false);\n      return querySnapshot.docs.length > 0 ? true : false;\n    });\n    return function userExists(_x5, _x6) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  return {\n    setUserProfile: addUser,\n    getUserProfile: function (_getUserProfile) {\n      function getUserProfile(_x7) {\n        return _getUserProfile.apply(this, arguments);\n      }\n      getUserProfile.toString = function () {\n        return _getUserProfile.toString();\n      };\n      return getUserProfile;\n    }(function (userId) {\n      return getUserProfile(userId);\n    }),\n    deleteUserProfile: deleteUser,\n    queryUserProfile: function (_queryUserProfile) {\n      function queryUserProfile(_x8, _x9) {\n        return _queryUserProfile.apply(this, arguments);\n      }\n      queryUserProfile.toString = function () {\n        return _queryUserProfile.toString();\n      };\n      return queryUserProfile;\n    }(function (fieldName, value) {\n      return queryUserProfile(fieldName, value);\n    }),\n    emailExists: function (_emailExists) {\n      function emailExists(_x10) {\n        return _emailExists.apply(this, arguments);\n      }\n      emailExists.toString = function () {\n        return _emailExists.toString();\n      };\n      return emailExists;\n    }(function (email) {\n      return emailExists(email);\n    }),\n    userExists: userExists,\n    createSocietyPost: function (_createSocietyPost) {\n      function createSocietyPost(_x11, _x12) {\n        return _createSocietyPost.apply(this, arguments);\n      }\n      createSocietyPost.toString = function () {\n        return _createSocietyPost.toString();\n      };\n      return createSocietyPost;\n    }(function (userId, postData) {\n      return createSocietyPost(userId, postData);\n    }),\n    loading: loading\n  };\n};\nexport default userFirestore;","map":{"version":3,"names":["firestore","getDoc","deleteDoc","getDocs","where","query","collection","doc","setDoc","useState","userFirestore","_useState","_useState2","_slicedToArray","loading","setLoading","addUser","_ref","_asyncToGenerator","userData","userRef","email","_x","apply","arguments","deleteUser","_ref2","userId","_x2","updateUser","_ref3","updatedUserData","merge","_x3","_x4","userExists","_ref4","password","q","querySnapshot","docs","length","_x5","_x6","setUserProfile","getUserProfile","_getUserProfile","_x7","toString","deleteUserProfile","queryUserProfile","_queryUserProfile","_x8","_x9","fieldName","value","emailExists","_emailExists","_x10","createSocietyPost","_createSocietyPost","_x11","_x12","postData"],"sources":["D:/MASOOD UNI/wheelhub/hooks/userfirestore.js"],"sourcesContent":["import { firestore } from '../database/dbconfig';\r\nimport {\r\n  getDoc,\r\n  deleteDoc,\r\n  getDocs,\r\n  where,\r\n  query,\r\n  collection,\r\n  doc,\r\n  setDoc,\r\n} from 'firebase/firestore';\r\nimport { useState } from 'react';\r\n\r\nconst userFirestore = () => {\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const addUser = async (userData) => {\r\n     const userRef = collection(firestore, 'users');\r\n    await setDoc(doc(userRef, userData.email), userData);\r\n  };\r\n\r\n  const deleteUser = async (userId) => {\r\n    const userRef = doc(firestore, 'users', userId);\r\n    await deleteDoc(userRef);\r\n  };\r\n\r\n  const updateUser = async (userId, updatedUserData) => {\r\n    const userRef = doc(firestore, 'users', userId);\r\n    await setDoc(userRef, updatedUserData, { merge: true });\r\n  };\r\n\r\n  const userExists = async (email, password) => {\r\n    setLoading(true);\r\n    const q = query(\r\n      collection(firestore, 'users'),\r\n      where('email', '==', email),\r\n      where('password', '==', password)\r\n    );\r\n\r\n    const querySnapshot = await getDocs(q);\r\n    setLoading(false);\r\n    return querySnapshot.docs.length > 0 ? true : false;\r\n  };\r\n\r\n  // ... (Other methods remain the same)\r\n\r\n  return {\r\n    setUserProfile: addUser,\r\n    getUserProfile: (userId) => getUserProfile(userId), // unchanged\r\n    deleteUserProfile: deleteUser,\r\n    queryUserProfile: (fieldName, value) => queryUserProfile(fieldName, value), // unchanged\r\n    emailExists: (email) => emailExists(email),\r\n    userExists: userExists,\r\n    createSocietyPost: (userId, postData) => createSocietyPost(userId, postData), // unchanged\r\n    loading,\r\n  };\r\n};\r\n\r\nexport default userFirestore;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}