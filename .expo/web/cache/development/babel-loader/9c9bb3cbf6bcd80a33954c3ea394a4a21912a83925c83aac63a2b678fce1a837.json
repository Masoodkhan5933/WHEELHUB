{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { getDoc, deleteDoc, getDocs, where, query, collection, doc, setDoc } from 'firebase/firestore';\nimport { useState } from 'react';\nimport { firestore } from \"../database/dbconfig\";\nvar carsFirestore = function carsFirestore() {\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    loading = _useState2[0],\n    setLoading = _useState2[1];\n  var addUser = function () {\n    var _ref = _asyncToGenerator(function* (userData) {\n      var usersRef = collection(firestore, 'users');\n      yield setDoc(doc(usersRef, userData.email), userData);\n    });\n    return function addUser(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var deleteUser = function () {\n    var _ref2 = _asyncToGenerator(function* (email) {\n      var userRef = doc(firestore, 'users', email);\n      yield deleteDoc(userRef);\n    });\n    return function deleteUser(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var updateUser = function () {\n    var _ref3 = _asyncToGenerator(function* (email, updatedUserData) {\n      var userRef = doc(firestore, 'users', email);\n      yield setDoc(userRef, updatedUserData, {\n        merge: true\n      });\n    });\n    return function updateUser(_x3, _x4) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var userExists = function () {\n    var _ref4 = _asyncToGenerator(function* (email, password) {\n      setLoading(true);\n      var q = query(collection(firestore, 'users'), where('email', '==', email), where('password', '==', password));\n      var querySnapshot = yield getDocs(q);\n      setLoading(false);\n      return querySnapshot.docs.length > 0 ? true : false;\n    });\n    return function userExists(_x5, _x6) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var addCar = function () {\n    var _ref5 = _asyncToGenerator(function* (carData) {\n      try {\n        var carsCollection = collection(firestore, 'cars');\n        yield setDoc(doc(carsCollection), carData);\n      } catch (error) {\n        console.error('Error adding car:', error);\n        throw error;\n      }\n    });\n    return function addCar(_x7) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var deleteCar = function () {\n    var _ref6 = _asyncToGenerator(function* (carName) {\n      var carRef = doc(firestore, 'cars', carName);\n      yield deleteDoc(carRef);\n    });\n    return function deleteCar(_x8) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n  var updateCar = function () {\n    var _ref7 = _asyncToGenerator(function* (carName, updatedCarData) {\n      var carRef = doc(firestore, 'cars', carName);\n      yield setDoc(carRef, updatedCarData, {\n        merge: true\n      });\n    });\n    return function updateCar(_x9, _x10) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n  var carExists = function () {\n    var _ref8 = _asyncToGenerator(function* (carName) {\n      setLoading(true);\n      var q = query(collection(firestore, 'cars'), where('carName', '==', carName));\n      var querySnapshot = yield getDocs(q);\n      setLoading(false);\n      return querySnapshot.docs.length > 0 ? true : false;\n    });\n    return function carExists(_x11) {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n  return {\n    addCar: addCar,\n    deleteCar: deleteCar,\n    updateCar: updateCar,\n    carExists: carExists,\n    loading: loading\n  };\n};\nexport default carsFirestore;","map":{"version":3,"names":["getDoc","deleteDoc","getDocs","where","query","collection","doc","setDoc","useState","firestore","carsFirestore","_useState","_useState2","_slicedToArray","loading","setLoading","addUser","_ref","_asyncToGenerator","userData","usersRef","email","_x","apply","arguments","deleteUser","_ref2","userRef","_x2","updateUser","_ref3","updatedUserData","merge","_x3","_x4","userExists","_ref4","password","q","querySnapshot","docs","length","_x5","_x6","addCar","_ref5","carData","carsCollection","error","console","_x7","deleteCar","_ref6","carName","carRef","_x8","updateCar","_ref7","updatedCarData","_x9","_x10","carExists","_ref8","_x11"],"sources":["D:/MASOOD UNI/wheelhub/hooks/carsfirestore.js"],"sourcesContent":["\r\nimport {\r\n  getDoc,\r\n  deleteDoc,\r\n  getDocs,\r\n  where,\r\n  query,\r\n  collection,\r\n  doc,\r\n  setDoc,\r\n} from 'firebase/firestore';\r\nimport { useState } from 'react';\r\nimport { firestore } from '../database/dbconfig';\r\n\r\nconst carsFirestore = () => {\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // User operations\r\n  const addUser = async (userData) => {\r\n    const usersRef = collection(firestore, 'users');\r\n    await setDoc(doc(usersRef, userData.email), userData);\r\n  };\r\n\r\n  const deleteUser = async (email) => {\r\n    const userRef = doc(firestore, 'users', email);\r\n    await deleteDoc(userRef);\r\n  };\r\n\r\n  const updateUser = async (email, updatedUserData) => {\r\n    const userRef = doc(firestore, 'users', email);\r\n    await setDoc(userRef, updatedUserData, { merge: true });\r\n  };\r\n\r\n  const userExists = async (email, password) => {\r\n    setLoading(true);\r\n    const q = query(collection(firestore, 'users'), where('email', '==', email), where('password', '==', password));\r\n\r\n    const querySnapshot = await getDocs(q);\r\n    setLoading(false);\r\n    return querySnapshot.docs.length > 0 ? true : false;\r\n  };\r\n\r\n  // Car operations\r\n  const addCar = async (carData) => {\r\n    try {\r\n      // Get a reference to the 'cars' collection\r\n      const carsCollection = collection(firestore, 'cars');\r\n\r\n      // Add a new document to the 'cars' collection\r\n      await setDoc(doc(carsCollection), carData);\r\n    } catch (error) {\r\n      console.error('Error adding car:', error);\r\n      throw error; // Rethrow the error to handle it in the component\r\n    }\r\n  };\r\n\r\n  const deleteCar = async (carName) => {\r\n    const carRef = doc(firestore, 'cars', carName);\r\n    await deleteDoc(carRef);\r\n  };\r\n\r\n  const updateCar = async (carName, updatedCarData) => {\r\n    const carRef = doc(firestore, 'cars', carName);\r\n    await setDoc(carRef, updatedCarData, { merge: true });\r\n  };\r\n\r\n  const carExists = async (carName) => {\r\n    setLoading(true);\r\n    const q = query(collection(firestore, 'cars'), where('carName', '==', carName));\r\n\r\n    const querySnapshot = await getDocs(q);\r\n    setLoading(false);\r\n    return querySnapshot.docs.length > 0 ? true : false;\r\n  };\r\n\r\n  return {\r\n    addCar,\r\n    deleteCar,\r\n    updateCar,\r\n    carExists,\r\n    loading,\r\n  };\r\n};\r\n\r\nexport default carsFirestore;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}